# Scenario Map Editor Pro - Visual & Interactive Guide

## User Workflow Example

### Step 1: Open Map Editor
```
Right Panel shows:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Scenario Map Pro                â”‚
â”‚ [Presets]  [Editor On]          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ World W: 640                    â”‚
â”‚ World H: 480                    â”‚
â”‚ Wall Margin: 20                 â”‚
â”‚ Zoom: 1.00  [Reset View]        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Step 2: Place Obstacles
**Action**: Click on canvas 3 times at different positions
```
Canvas shows:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚ â”‚  #1 110Ã—50                   â”‚â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚â”‚
â”‚ â”‚ â”‚ Obstacle #1     â”‚          â”‚â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[O]â”€â”€â”€â”˜â”‚          â”‚â”‚  [O] = Resize handle
â”‚ â”‚                   â”‚          â”‚â”‚
â”‚ â”‚      #2 110Ã—50    â”‚   #3     â”‚â”‚
â”‚ â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ 110Ã—50  â”‚â”‚
â”‚ â”‚   â”‚ Obstacle #2 â”‚  â”‚â”Œâ”€â”€â”€â”€â”€â”€â”â”‚â”‚
â”‚ â”‚   â””â”€â”€â”€â”€[O]â”€â”€â”€â”€â”€â”€â”˜  â”‚â”‚  #3  â”‚â”‚â”‚
â”‚ â”‚                    â”‚â””â”€[O]â”€â”€â”˜â”‚â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚ [â†¶ Undo] [Clear All] 3 obstaclesâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Step 3: Rotate First Obstacle
**Action**: Select obstacle #1, then drag yellow handle in circular motion
```
Before:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Obstacle #1     â”‚  â”‚
â”‚  â”‚  @ 100, 100      â”‚  â”‚
â”‚  â”‚  110Ã—50          â”‚  â”‚
â”‚  â”‚         â­• (yellow)â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€[O]â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

After 45Â° rotation:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      â­• (yellow)       â”‚
â”‚    â—‡â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â•±  Obstacle #1 â—‡   â”‚ â”‚
â”‚  â•± âˆ 45Â° â—‡ 110Ã—50  â”‚  â”‚
â”‚        â—‡â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚         [cyan corner] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

Inspector shows:
```
Obstacle #1
â”œâ”€ X: 100
â”œâ”€ Y: 100
â”œâ”€ W: 110
â”œâ”€ H: 50
â””â”€ Rotation: 45Â° [|â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•=]
```

### Step 4: Zoom & Pan
**Action**: Ctrl+Scroll to zoom 2.0x, Shift+Drag to pan right
```
Zoom Level: 1.00x â†’ 2.00x
- Canvas shows obstacles 2x larger
- All interactions still work (drag, rotate, resize)
- Labels still visible: "#1 110Ã—50 âˆ 45Â°"

Pan by (150, 100):
- Entire view shifts right and down
- World boundary moves
- Grid still aligned
```

Inspector shows:
```
Config:
â”œâ”€ Zoom: 2.00  â† NEW
â”œâ”€ Pan X: 150  â† NEW
â””â”€ Pan Y: 100  â† NEW
```

Reset button click:
- Zoom â†’ 1.00
- Pan X â†’ 0
- Pan Y â†’ 0

### Step 5: Save Preset
**Action**: Click [Presets] button, enter name "Corridor Sprint", click [SAVE]

Before save:
```
[Presets]
<Preset panel opens>
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [Corridor Sprint] [â–¼]â”‚
â”‚        [SAVE]        â”‚
â”‚                      â”‚
â”‚ No presets saved     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

After save:
```
[Presets (1)]
<Preset panel expanded>
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [New preset] [â–¼]     â”‚
â”‚       [SAVE]         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ > Corridor Sprint [âœ•]â”‚
â”‚                      â”‚
â”‚ Click to load        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Saved Preset Contains**:
```json
{
  "name": "Corridor Sprint",
  "config": {
    "enabled": true,
    "worldWidth": 640,
    "worldHeight": 480,
    "wallMargin": 20,
    "obstacles": [
      {"x": 100, "y": 100, "width": 110, "height": 50, "rotation": 45},
      {"x": 250, "y": 200, "width": 110, "height": 50, "rotation": 0},
      {"x": 400, "y": 350, "width": 110, "height": 50, "rotation": -30}
    ],
    "zoom": 2.0,
    "panX": 150,
    "panY": 100,
    "defaultObstacleWidth": 110,
    "defaultObstacleHeight": 50
  }
}
```

### Step 6: Start Training
**Action**: Click "Start Training" button

Payload sent to backend:
```json
{
  "steps": 5000,
  "algorithm": "PPO",
  "environmentProfile": "arena_basic",
  "modelProfile": "balanced",
  "customEnvironment": {
    "world": {
      "width": 640,
      "height": 480,
      "wall_margin": 20,
      "obstacles": [
        {
          "x": 100,
          "y": 100,
          "width": 110,
          "height": 50,
          "rotation": 45
        },
        {
          "x": 250,
          "y": 200,
          "width": 110,
          "height": 50,
          "rotation": 0
        },
        {
          "x": 400,
          "y": 350,
          "width": 110,
          "height": 50,
          "rotation": -30
        }
      ]
    }
  }
}
```

### Step 7: Load & Reuse Preset
**Action**: Later session - Click [Presets], select "Corridor Sprint", modify one obstacle, save as new preset

```
[Presets (1)]
<Panel opens>
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [New preset] [â–¼]       â”‚
â”‚       [SAVE]           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ > Corridor Sprint [âœ•]  â”‚ â† Click to load
â”‚                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â†“ Click
Canvas updates instantly:
- All 3 obstacles appear
- Zoom: 2.0x
- Pan: (150, 100)
- Rotations restored: 45Â°, 0Â°, -30Â°

User then:
- Adjusts one obstacle position
- Updates rotation of obstacle #2 to 60Â°
- Changes preset name to "Corridor Sprint v2"
- Clicks [SAVE]

Result:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [New preset] [â–¼]       â”‚
â”‚       [SAVE]           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ > Corridor Sprint [âœ•]  â”‚
â”‚ > Corridor Sprint v2[âœ•]â”‚
â”‚                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Keyboard Shortcut Usage Patterns

### Pattern 1: Design Complex Maze
```
1. Place 10+ obstacles with default rotation (0Â°)
2. Zoom in (Ctrl+Scroll) to detail view
3. Pan around (Shift+Drag) to work on different sections
4. Select & rotate key obstacles for visual interest (45Â°, -45Â°)
5. Zoom out (Ctrl+Scroll) to see full picture
6. Save preset as "Complex Maze v1"
```

### Pattern 2: Tight Space Challenge
```
1. Place 3 obstacles close together
2. Zoom 2x for precise placement
3. Rotate all at 30Â° angles for dynamic appearance
4. Pan to check spacing
5. Fine-tune coordinates in inspector
6. Save as "Tight Space"
7. Load and modify for "Tight Space Hard"
```

### Pattern 3: Quick Clear & Reset
```
1. Unhappy with layout: [Clear All]
2. Start fresh
3. Or [â†¶ Undo] one obstacle at a time
4. Or click [Reset View] to center canvas
```

---

## Advanced Feature Combination

### Multi-Zoom Design Workflow
```
Canvas Zoom: 1.0x (full view)
  â”œâ”€ Place obstacles roughly
  â”œâ”€ Adjust world dimensions
  â””â”€â†’ Zoom to 1.5x (detail work)
      â”œâ”€ Fine-tune positions
      â”œâ”€ Apply rotations
      â”œâ”€ Pan to corners
      â””â”€â†’ Zoom to 2.5x (final detail)
          â”œâ”€ Check obstacle spacing
          â”œâ”€ Verify dimension labels
          â””â”€â†’ [Reset View] to 1.0x
              â””â”€ Save final preset
```

### Preset-Based Iteration Loop
```
Load "Tight Space" preset
  â†“
Modify: Move obstacle, change rotation 45Â° â†’ 60Â°
  â†“
Save as "Tight Space v2"
  â†“
Start training run with "Tight Space v2"
  â†“
Results good? â†’ Save as "Final Layout"
Results poor? â†’ Load "Tight Space", try different approach
```

---

## Accessibility & Help

### On-Screen Help (When editor disabled)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Enable editor to interact  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Shift+Drag: Pan             â”‚
â”‚ Ctrl+Wheel: Zoom            â”‚
â”‚ Click: Place | Drag: Move   â”‚
â”‚ Yellow: Rotate              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Label Information
Each obstacle shows:
- `#1` â†’ Obstacle index (order placed)
- `110Ã—50` â†’ Current dimensions (width Ã— height)
- `âˆ 45Â°` â†’ Rotation (only when != 0Â°)

### Handle Colors
- ğŸŸ¦ **Cyan corner** â†’ Resize (bottom-right)
- ğŸŸ¨ **Yellow circle** â†’ Rotate (top-center)

---

## Typical Scenario Designs

### Scenario: "Warehouse Dense"
```
8 tall obstacles (rotations: 0Â°, 45Â°, 90Â°, 135Â°, 0Â°, 45Â°, 90Â°, 135Â°)
Tight spacing, multiple aisles
Preset zoom: 1.5x (see layout overview)
Training: PPO, 10k steps
```

### Scenario: "Sprint Corridor"
```
2-3 obstacles on sides, diagonal rotation
Wide path in middle for speed
Preset zoom: 1.0x
Training: DQN (discrete), 5k steps
```

### Scenario: "Complex T-Junction"
```
4 obstacles forming T shape - rotations staggered
Narrow turns, path decision points
Preset zoom: 1.2x, pan to junction center
Training: A2C, 15k steps
```

---

## Copy-Paste Preset JSON (For Sharing)

Users can share presets by copy-pasting JSON:

```json
{
  "name": "Team Standard: Warehouse Tight",
  "config": {
    "enabled": true,
    "worldWidth": 800,
    "worldHeight": 600,
    "wallMargin": 25,
    "obstacles": [
      {"x": 100, "y": 100, "width": 120, "height": 60, "rotation": 0},
      {"x": 300, "y": 150, "width": 100, "height": 100, "rotation": 45},
      {"x": 550, "y": 200, "width": 80, "height": 120, "rotation": -45},
      {"x": 350, "y": 400, "width": 120, "height": 60, "rotation": 90}
    ],
    "zoom": 1.2,
    "panX": 0,
    "panY": 0,
    "defaultObstacleWidth": 100,
    "defaultObstacleHeight": 60
  }
}
```

Recipient could:
1. Load preset in UI (future: import modal)
2. Modify for their needs
3. Add to team library

---

## Error States & Recovery

| State | Display | Recovery |
|-------|---------|----------|
| No obstacles | "0 obstacles" counter | Click canvas to place |
| Out of bounds | Clamped to limits | Inspector shows corrected X/Y |
| Invalid rotation | Normalized to 0-360 | Slider shows valid value |
| Zoom too far | Clamped to 0.5-3x | Use [Reset View] button |
| Pan off-screen | Constrained by canvas | Use [Reset View] button |

---

## Performance Tips

- [ ] Keep obstacles < 50 for responsive interaction
- [ ] Use zoom for detail work on complex layouts
- [ ] Save presets before major modifications
- [ ] Clear unused obstacles to reduce clutter
- [ ] Reset view if canvas feels sluggish (very large pan offset)

---

## Next Steps (User POV)

1. âœ… Design scenario with map editor
2. âœ… Save preset with meaningful name
3. âœ… Adjust Scenario Builder dynamics (noise, drift)
4. âœ… Choose training template (autonomous-driving, drone, etc.)
5. âœ… Click "Start Training"
6. âœ… Monitor metrics in real-time
7. âœ… Download deployment bundle when ready
8. âœ… Deploy to robot!
